<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Poker Blind Timer</title>
        <link rel="stylesheet" href="style.css">
    </head>
<body>
    <header>
        <img src="Poker Logo.jpeg" alt="Poker Society Logo">
        <h1>UWE Poker Society</h1>
    </header>
    
    <h3>Blinds</h3>
    <div id="blinds"><span id="current-blinds">25/50</span></div>
    <div id="next-blinds"> <span id="next-blinds-info"></span></div>
    <h3>Time Remaining</h3>
    <div id="timer">15:00</div>
    <div id="timer-bar"></div>
    <div id="chip-swap"></div>

    <audio id="endBlindSound" src="countdown.mp3" preload="auto"></audio>
    <section class="buttons">
    <button onclick="startTimer()">Start</button>
    <button onclick="pauseTimer()">Pause</button>
    <button onclick="resetTimer()">Reset</button>
    </section>
    <section class="buttons">
    <button onclick="previousBlind()">Previous Blind</button>
    <button onclick="nextBlind()">Next Blind</button>
    </section>


    <script>
        let blinds = [
    {small: 25, big: 50}, {small: 50, big: 100}, {small: 75, big: 150},
    {small: 150, big: 300}, "BREAK", {small: 300, big: 600}, {small: 500, big: 1000}, "BREAK",
    {small: 1000, big: 2000}, {small: 1500, big: 3000}, {small: 3000, big: 6000},
    {small: 6000, big: 12000}, {small: 15000, big: 30000}
];
let currentBlindIndex = 0;
let timerDuration = 15 * 60; // 15 minutes in seconds
let timer = timerDuration;
let interval;

function displayBlinds() {
    const currentBlindsElement = document.getElementById('current-blinds');
    const nextBlindsElement = document.getElementById('next-blinds-info');
    const chipSwapElement = document.getElementById('chip-swap');

    let blind = blinds[currentBlindIndex];
    if (blind === 'BREAK') {
        currentBlindsElement.textContent = 'BREAK';
        nextBlindsElement.textContent = (currentBlindIndex + 1 < blinds.length) ? `${blinds[currentBlindIndex + 1]}` : '';
    } else {
        currentBlindsElement.textContent = `${blind.small}/${blind.big}`;
        if ((blind.small === 300 && blind.big === 600) || (blind.small === 3000 && blind.big === 6000)) {
            document.getElementById('chip-swap').textContent = 'CHIP SWAP';
            document.getElementById('chip-swap').style.color = '#FFFFFF'; // Set chip swap text color to white
        } else {
            document.getElementById('chip-swap').textContent = 'CHIP SWAP';
            document.getElementById('chip-swap').style.color = 'transparent'; // Hide chip swap text
        }
    }

    // Update next blinds display
    const nextBlind = currentBlindIndex + 1 < blinds.length ? blinds[currentBlindIndex + 1] : null;
    if (nextBlind) {
        if (nextBlind === 'BREAK') {
            nextBlindsElement.textContent = 'BREAK';
        } else {
            nextBlindsElement.textContent = `${nextBlind.small}/${nextBlind.big}`;
        }
    } else {
        nextBlindsElement.textContent = 'End of Blinds';
    }
}



function displayTime() {
    let minutes, seconds;
    if (currentBlindIndex === blinds.length - 1) {
        document.getElementById('timer').textContent = '--:--';
    } else {
        minutes = Math.floor(timer / 60);
        seconds = timer % 60;
        document.getElementById('timer').textContent = 
            `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    }
}


function updateTimerBar() {
    // Check if on the final blind and stop updating the timer bar
    if (currentBlindIndex >= blinds.length - 1) {
        document.getElementById('timer-bar').style.width = '0%'; // Optionally, set to full width or hide
    } else {
        const percentRemaining = (timer / timerDuration) * 100;
        document.getElementById('timer-bar').style.width = percentRemaining + '%';
    }
}


function startTimer() {
    clearInterval(interval);
    interval = setInterval(() => {
        if (timer > 0) {
            timer--;
            displayTime();
            updateTimerBar();

            // Check if there are exactly 4 seconds left
            if (timer === 3) {
                var sound = document.getElementById("endBlindSound");
                sound.play();
            }
        } else {
            nextBlind();
        }
    }, 1000);
}

function pauseTimer() {
    clearInterval(interval);
}

function resetTimer() {
    timer = timerDuration;
    displayTime();
    updateTimerBar(); // Update timer bar
}

function nextBlind() {
    if (currentBlindIndex < blinds.length - 1) {
        currentBlindIndex++;
        timer = timerDuration;
        displayBlinds();
        displayTime();
        updateTimerBar(); // Update timer bar
    }
}

function previousBlind() {
    if (currentBlindIndex > 0) {
        currentBlindIndex--;
        timer = timerDuration;
        displayBlinds();
        displayTime();
        updateTimerBar(); // Update timer bar
    }
}

// Initialize display
displayBlinds();
displayTime();
updateTimerBar(); // Update timer bar

    </script>
</body>
</html>
